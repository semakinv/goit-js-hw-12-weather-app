(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{L1EO:function(e,t,n){},QfWi:function(e,t,n){"use strict";n.r(t);n("SUr3"),n("L1EO");var o=document.querySelector("#spinner"),i={show:function(){o.classList.remove("is-hidden")},hide:function(){o.classList.add("is-hidden")}},c=(n("D/wG"),n("dIfx"));function r(e){var t={locationRef:document.querySelector('span[data-field="location"]'),tempRef:document.querySelector('span[data-field="temp"]'),humidityRef:document.querySelector('span[data-field="humidity"]'),windRef:document.querySelector('span[data-field="wind"]'),conditionsRef:document.querySelector('span[data-field="conditions"]'),iconRef:document.querySelector(".icon"),weatherDisplayRef:document.getElementById("weather")};1!==Object.keys(e).length?(t.locationRef.textContent=""+e.location.name,t.tempRef.textContent=""+e.current.temp_c,t.humidityRef.textContent=e.current.humidity+"%",t.windRef.textContent=e.current.wind_kph+" kph",t.conditionsRef.textContent=""+e.current.condition.text,t.iconRef.setAttribute("alt",""+e.current.condition.text),t.iconRef.setAttribute("src",""+e.current.condition.icon),t.weatherDisplayRef.classList.remove("is-hidden")):c.a.notice({text:"Позиция с таким названием не найдена. Введите верное название города"})}n("JBxO"),n("FdtR");function u(e){if("undefined,undefined"!==e)return fetch("https://api.apixu.com/v1/current.json?key=b47a5685a79b48b38c180939192207&q="+e).then(function(e){return e.json()}).then(function(e){return Promise.resolve(e)})}var d,s;(d={enableHighAccuracy:!0,timeout:5e3,maximumAge:18e5},s={},new Promise(function(e,t){navigator.geolocation.getCurrentPosition(function(e){var t=e.coords;s.latitude=t.latitude,s.longitude=t.longitude},function(e){return console.warn("ERROR("+e.code+"): "+e.message),c.a.notice({text:"Нет доступа к геопозиции, используйте поиск по имени города."}),i.hide(),s.error="ERROR("+e.code+"): "+e.message},d),e(s)})).then(function(e){i.show();var t=document.getElementById("search-form");t.querySelector('input[type="text"]');function n(e){e.preventDefault(),console.log("+++++++++++++++++++++"),console.log(t.querySelector('input[type="text"]')),console.log("+++++++++++++++++++++");u("Toronto").then(function(e){r(e)}),t.reset()}setTimeout(function(){if(1===Object.keys(e).length)return t.addEventListener("submit",n),void i.hide();setTimeout(function(){t.addEventListener("submit",n),u(e.latitude+","+e.longitude).then(function(e){1!==Object.keys(e).length?r(e):i.hide()}),i.hide()},5e3)},20)})}},[["QfWi",1,2]]]);
//# sourceMappingURL=main.ad7050204755a72c2fba.js.map